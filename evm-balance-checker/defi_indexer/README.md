# DeFi Positions Indexer

ğŸš€ **Production-ready** auto-generated configuration for indexing DeFi positions across multiple chains using **rindexer**.

## âœ¨ Features

- âœ… **Works without API keys** - Built-in fallback ABIs for major protocols
- âœ… **Minimal ABIs** - Only position-tracking events (no bloat)
- âœ… **Multi-chain** - 5 networks configured
- âœ… **Top protocols** - 8 DeFi protocols indexed
- âœ… **12 contracts** ready to index

## ğŸ“Š Indexed Protocols

| Protocol | Category | Networks |
|----------|----------|----------|
| Aave V3 | Lending | arbitrum, base, ethereum, optimism, polygon |
| Balancer V2 | Dex | arbitrum, ethereum, polygon |
| Compound V3 | Lending | arbitrum, base, ethereum, polygon |
| GMX | Perp | arbitrum, avalanche |
| Lido | Staking | ethereum |
| Rocket Pool | Staking | ethereum |
| SushiSwap | Dex | arbitrum, ethereum, polygon |
| Uniswap V3 | Dex | arbitrum, base, ethereum, optimism, polygon |

## ğŸš€ Quick Start

### 1. Install rindexer

```bash
cargo install rindexer
```

### 2. Set up environment

```bash
cp .env.example .env
# Edit .env with your RPC URLs (API keys optional)
```

### 3. Run the indexer

```bash
cd ./defi_indexer
rindexer start all
```

## ğŸ“ Structure

```
./defi_indexer/
â”œâ”€â”€ rindexer.yaml          # Main configuration
â”œâ”€â”€ abis/                  # Minimal ABIs (events only)
â”‚   â”œâ”€â”€ aave-v3_ethereum_pool.json
â”‚   â”œâ”€â”€ uniswap-v3_ethereum_factory.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ .env.example           # Environment template
â””â”€â”€ README.md              # This file
```

## ğŸ”§ Configuration Details

### Networks (5)
- **Ethereum** (Chain ID: 1) - 4 contracts
- **Arbitrum** (Chain ID: 42161) - 2 contracts
- **Polygon** (Chain ID: 137) - 2 contracts
- **Optimism** (Chain ID: 10) - 2 contracts
- **Base** (Chain ID: 8453) - 2 contracts

### Event Categories

**Lending** (Aave, Compound)
- `Supply`, `Withdraw`, `Borrow`, `Repay`, `LiquidationCall`

**DEX** (Uniswap, Balancer, SushiSwap)
- `PoolCreated`, `Mint`, `Burn`, `Swap`, `AddLiquidity`, `RemoveLiquidity`

**Staking** (Lido, Rocket Pool)
- `Transfer`, `Deposit`, `Withdraw`

**Perpetuals** (GMX)
- `AddLiquidity`, `RemoveLiquidity`, `IncreasePosition`, `DecreasePosition`

## ğŸ”„ Regenerating

To regenerate with updated protocols or API keys:

```bash
# With API keys (fetches latest ABIs)
python defi_indexer_generator_v2.py

# Without API keys (uses fallback ABIs)
python defi_indexer_generator_v2.py --no-api-keys
```

## ğŸ“Š Generation Stats

- Fetched from API: 0
- Used fallback ABIs: 12
- Failed: 12

## ğŸ¯ Use Cases

1. **Portfolio Tracking** - Index user positions across all protocols
2. **Analytics** - Track protocol TVL, volumes, and user activity
3. **Risk Monitoring** - Monitor liquidations and health factors
4. **Yield Farming** - Track LP positions and rewards
5. **Historical Analysis** - Query historical DeFi positions

## ğŸ“š Resources

- [rindexer Documentation](https://rindexer.xyz)
- [The Graph Explorer](https://thegraph.com/explorer)
- [DeFi Llama](https://defillama.com)

## âš ï¸ Notes

- **Start blocks** are set to `latest` - adjust for historical indexing
- **ABIs** are minimal (events only) to reduce size and improve performance
- **Fallback ABIs** ensure the indexer works even without block explorer API keys
- **Rate limits** apply to free-tier block explorer APIs (5 calls/sec)

## ğŸ” API Keys (Optional)

While the indexer works without API keys using fallback ABIs, providing keys enables:
- Fetching latest ABIs with all event signatures
- Higher rate limits for ABI fetching
- Support for newly deployed contracts

Get free API keys:
- Etherscan: https://etherscan.io/apis
- Arbiscan: https://arbiscan.io/apis
- Polygonscan: https://polygonscan.com/apis
- Snowtrace: https://snowtrace.io/apis
- BscScan: https://bscscan.com/apis

---

Generated by **DeFi Indexer Generator V2**
